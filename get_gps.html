<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“ å–å¾—ç›®å‰ä½ç½®åº§æ¨™</title>
    <style>
        body { font-family: "Microsoft JhengHei", sans-serif; padding: 20px; text-align: center; background-color: #f4f4f4; }
        .card { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        h2 { margin-top: 0; }
        .coord-box { font-size: 24px; font-weight: bold; color: #333; margin: 15px 0; padding: 10px; background: #eef; border-radius: 5px; word-break: break-all;}
        .label { font-size: 14px; color: #666; margin-bottom: 5px; }
        .accuracy { font-size: 14px; color: #d9534f; margin-bottom: 20px; }
        
        button { 
            width: 100%; 
            padding: 15px; 
            font-size: 18px; 
            margin-top: 10px; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
        }
        .btn-get { background-color: #007bff; color: white; }
        .btn-copy { background-color: #28a745; color: white; display: none; } /* é è¨­éš±è— */
        button:disabled { background-color: #ccc; }
    </style>
</head>
<body>

    <div class="card">
        <h2>ğŸ“ åº§æ¨™æ¡æ¨£å·¥å…·</h2>
        <p>è«‹è‡³å·¡æª¢é»ä½ç¾å ´ï¼ŒæŒ‰ä¸‹æŒ‰éˆ•å–å¾—åº§æ¨™ã€‚</p>

        <div class="label">ç·¯åº¦ (Latitude) / ç¶“åº¦ (Longitude)</div>
        <div id="displayCoords" class="coord-box">---</div>
        <div id="accuracyDisplay" class="accuracy"></div>

        <button id="getBtn" class="btn-get" onclick="getLocation()">ğŸ“¡ å–å¾—ç›®å‰ä½ç½®</button>
        <button id="copyBtn" class="btn-copy" onclick="copyToClipboard()">ğŸ“‹ è¤‡è£½åº§æ¨™æ•¸å€¼</button>
    </div>

    <script>
        let currentLat = 0;
        let currentLng = 0;

        function getLocation() {
            const display = document.getElementById("displayCoords");
            const accDisplay = document.getElementById("accuracyDisplay");
            const getBtn = document.getElementById("getBtn");
            const copyBtn = document.getElementById("copyBtn");

            if (!navigator.geolocation) {
                alert("æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´å®šä½åŠŸèƒ½");
                return;
            }

            display.innerText = "å®šä½ä¸­...";
            accDisplay.innerText = "";
            getBtn.disabled = true;
            copyBtn.style.display = "none";

            navigator.geolocation.getCurrentPosition(
                (position) => {
                    currentLat = position.coords.latitude;
                    currentLng = position.coords.longitude;
                    const accuracy = position.coords.accuracy;

                    // é¡¯ç¤ºæ•¸æ“š (å–å°æ•¸é»å¾Œ 6 ä½å·²éå¸¸ç²¾æº–)
                    display.innerText = `${currentLat.toFixed(6)}, ${currentLng.toFixed(6)}`;
                    
                    // é¡¯ç¤ºèª¤å·®å€¼æé†’
                    accDisplay.innerHTML = `GPS èª¤å·®åŠå¾‘ï¼šç´„ ${accuracy.toFixed(1)} å…¬å°º<br>(è‹¥èª¤å·®å¤§æ–¼ 20m å»ºè­°é‡æŠ“)`;

                    getBtn.disabled = false;
                    getBtn.innerText = "ğŸ“¡ é‡æ–°å®šä½";
                    copyBtn.style.display = "block"; // é¡¯ç¤ºè¤‡è£½æŒ‰éˆ•
                },
                (error) => {
                    alert("ç„¡æ³•å–å¾—ä½ç½®ï¼Œè«‹ç¢ºèªå·²é–‹å•Ÿ GPS æ¬Šé™ã€‚");
                    display.innerText = "å®šä½å¤±æ•—";
                    getBtn.disabled = false;
                },
                {
                    enableHighAccuracy: true, // é–‹å•Ÿé«˜ç²¾ç¢ºåº¦æ¨¡å¼
                    timeout: 10000,
                    maximumAge: 0
                }
            );
        }

        function copyToClipboard() {
            // æ ¼å¼åŒ–æˆç¨‹å¼ç¢¼éœ€è¦çš„æ ¼å¼
            const textToCopy = `const TARGET_LAT = ${currentLat.toFixed(6)};\nconst TARGET_LNG = ${currentLng.toFixed(6)};`;
            
            navigator.clipboard.writeText(textToCopy).then(() => {
                alert("å·²è¤‡è£½ï¼è«‹è²¼ä¸Šåˆ°æ‚¨çš„ç¨‹å¼ç¢¼ä¸­ã€‚\n\n" + textToCopy);
            }).catch(err => {
                alert("è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•é¸å–æ–‡å­—è¤‡è£½");
            });
        }
    </script>

</body>
</html>